*** testing 6 bit flash

************ defining Vdd and clk and inputs*************
VDD vdd gnd DC 1.8V
Vclk1 clk gnd PULSE (1.8 0 0 0.1n 0.1n 2.5n 5n)
Vclk2 clk_bar gnd PULSE (0 1.8 0 0.1n 0.1n 2.5n 5n)
Vclk_SH2_1 clk_sh2 gnd PULSE (1.8 0 1.6n 0.1n 0.1n 2.5n 5n)
Vclk_SH2_2 clk_bar_sh2 gnd PULSE (0 1.8 1.6n 0.1n 0.1n 2.5n 5n)
Vclk_SH3_1 clk_sh3 gnd PULSE (1.8 0 2n 0.1n 0.1n 2.5n 5n)
Vclk_SH3_2 clk_bar_sh3 gnd PULSE (0 1.8 2n 0.1n 0.1n 2.5n 5n)
Vin s_h_in gnd SIN(0.9 0.88 1MEG 0 0)
Vbias nmos_bias gnd 0.9

*********************************************************

************ include tsmc 180 model file **************
.include tsmc_spice_model.txt
********************************************************

*********************************************************
.include s_h_tran.cir
*********************************************************

************ include sense comaprator  **************
.include sense_comparator.cir
********************************************************

************ include inverter  **************
.include inverter.cir
********************************************************

************ include clocked comparator  **************
.include clocked_comparator.cir
********************************************************

************ include XOR to generate bubble code  **************
.include bubble_XOR.cir
********************************************************

*********************************************************
.include preamp.cir
*********************************************************

*********************************************************
.include pmos_preamp.cir
*********************************************************

*********************************************************
.include or_4ip.cir
*********************************************************

*********************************************************
.include or_8ip.cir
*********************************************************

*********************************************************
.include adc_3.cir
*********************************************************

*********************************************************
.include dac_3.cir
*********************************************************

*********************************************************
.include adc_4.cir
*********************************************************

********************************* sample and hold *********************************
xs_h1 gnd clk_bar clk s_h_in adc_in s_h_tran
***********************************************************************************

************************* 3 bit flash *********************************************
xadc1 vdd gnd nmos_bias clk adc_in adc_out_bit0 adc_out_bit1 adc_out_bit2 adc_3
***********************************************************************************

************************* 3 bit DAC  **********************************************
************     lsb            1             msb            **********************
xdac vdd gnd adc_out_bit0 adc_out_bit1 adc_out_bit2 dac_out dac_3
***********************************************************************************

******************************** sample and hold DAC out *******************
xs_h2 gnd clk_bar_sh2 clk_sh2 dac_out sh2_out s_h_tran
**********************************************************************************

************************** subtractor with gain of 4 *********************************************
Esub sub_out gnd s_h_in sh2_out 1
**********************************************************************************

********************* offset of 0.1125V  ********************************************
Voffset sh3_in sub_out 0.1125
********************************************************************************

******************************** sample and hold for 4 bit adc *******************
xs_h3 gnd clk_bar_sh3 clk_sh3 sh3_in sh3_out s_h_tran
**********************************************************************************

********************* VcVs of gain 4 ********************************************
Eamp adc4_in gnd sh3_out gnd 4
********************************************************************************

************************* 4 bit flash *********************************************
xadc2 vdd gnd nmos_bias clk_sh2 adc4_in adc4_out_bit0 adc4_out_bit1 adc4_out_bit2 adc4_out_bit3 adc_4
***********************************************************************************


Vdummy0 adc6_out_bit0 adc4_out_bit0 0
Vdummy1 adc6_out_bit1 adc4_out_bit1 0
Vdummy2 adc6_out_bit2 adc4_out_bit2 0
Vdummy3 adc6_out_bit3 adc_out_bit0 0
Vdummy4 adc6_out_bit4 adc_out_bit1 0
Vdummy5 adc6_out_bit5 adc_out_bit2 0

.END

